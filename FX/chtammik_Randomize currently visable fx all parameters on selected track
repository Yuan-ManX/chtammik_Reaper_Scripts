/*
--	@version 0.2
--	@author chtammik
--	@repository Repository URI: https://github.com/chtammik/chtammik_Reaper_Scripts
*/

/*
// ----- DEBUGGING ====>
@import ../../Functions/X-Raym_Functions - console debug messages.eel

debug = 1; // 0 => No console. 1 => Display console messages for debugging.
clean = 1; // 0 => No console cleaning before every script execution. 1 => Console cleaning before every script execution.

msg_clean();
// <==== DEBUGGING -----
*/

function main() // local (i, j, item, take, track)
(
	Undo_BeginBlock(); // Begining of the undo block. Leave it at the top of your main function.
	
	track = GetSelectedTrack(0, 0);
	fx = -1;
	chainvisable = TrackFX_GetChainVisible(track); //returns index of effect visible in chain, or -1 for chain hidden, or -2 for visible no fx selected
	chainvisable >= 0 ?(
		fx = chainvisable;
		):(
		ShowConsoleMsg("\n");
		ShowConsoleMsg("ERROR: FX chain not visable or no FX selected!");
		ShowConsoleMsg("\n");
	);
	parameteramt = TrackFX_GetNumParams(track, fx);
	ShowConsoleMsg("fx id: ");
	msg_d(fx);
	ShowConsoleMsg("parameter amount: ");
	msg_d(parameteramt);
	// LOOP TRHOUGH FX parameters - by HeDa
	i=0; // INITIALIZE track loop
	modified = 0;
	randomize = 0;
	loop (parameteramt, // loop for all parameters
		//parametername = TrackFX_GetParamName(track, fx, i, "");
		//parametername == wet? dry? bypass?
		//ShowConsoleMsg("pramater index: ");
		//msg_d(i);
		//ShowConsoleMsg("pramater name: ");
		//msg_d(parametername);
		//ShowConsoleMsg(parametername);
		//ShowConsoleMsg("\n");
		(i+2) < parameteramt ? ( //exclude wet and bypass parameters created for every instance, temporary fix until string analysis is done
			random = rand();
			TrackFX_SetParamNormalized(track, fx, i, random);
			modified = modified + 1;
		);
		i=i+1; // INCREMENT loop
	); // ENDLOOP tracks loop
	ShowConsoleMsg("modified parameters: ");
	msg_d(modified);
	Undo_EndBlock("My action", 0); // End of the undo block. Leave it at the bottom of your main function.
);

msg_start(); // Display characters in the console to show you the begining of the script execution.
main(); // Execute your main function
//UpdateArrange(); // Update the arrangement (often needed)
msg_end(); // Display characters in the console to show you the end of the script execution.
